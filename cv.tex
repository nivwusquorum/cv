%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Plasmati Graduate CV
% LaTeX Template
% Version 1.0 (24/3/13)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Alessandro Plasmati (alessandro.plasmati@gmail.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
% Important note:
% This template needs to be compiled with XeLaTeX.
% The main document font is called Fontin and can be downloaded for free
% from here: http://www.exljbris.com/fontin.html
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%   PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt]{article} % Default font size and paper size

\usepackage[top=50pt,bottom=100pt,left=50pt,right=50pt]{geometry}

\usepackage{fontspec} % For loading fonts
\defaultfontfeatures{Mapping=tex-text}
\setmainfont[SmallCapsFont = Fontin SmallCaps]{Fontin} % Main document font
%\setmainfont{Helvetica Neue Light}

\usepackage{pythontex}

\usepackage{xunicode,xltxtra,url,parskip} % Formatting packages

\usepackage[usenames,dvipsnames]{xcolor} % Required for specifying custom colors

\usepackage{hyperref} % Required for adding links   and customizing them
\definecolor{linkcolour}{rgb}{0,0.2,0.6} % Link color
\hypersetup{colorlinks,breaklinks,urlcolor=linkcolour,linkcolor=linkcolour} % Set link colors throughout the document

\usepackage{multirow}

\usepackage{graphicx}
\usepackage[export]{adjustbox}

\usepackage{titlesec} % Used to customize the \section command
\titleformat{\section}{\Large\scshape\raggedright}{}{0em}{}[\titlerule] % Text formatting of sections
\titlespacing{\section}{0pt}{3pt}{3pt} % Spacing around sections





\begin{document}



\pagestyle{empty} % Removes page numbering
\begin{pycode}
from cv_data import (
                        first_names,
                        last_name,
                        email,
                        phone,
                        facebook,
                        events
                    )

def output_event(event):
    lines = []
    lines.append(r'\textsc{' + event['when'] + r'}')
    lines.append(event['role'] + r' at ' + r'\textsc{' + event['where'] + r'}')
    lines.append('')
    for topic, info in event['extra_info'].items():
        lines.append(r'\textbf{%s} %s' % (topic, info))

    print(r'\multirow{%s}{*}[\normalbaselineskip]{\includegraphics[width=2cm]{%s}}' % (len(lines), event['image']), end='')

    for i in range(len(lines)):
        print(r'&', end='')
        print(lines[i], end='')
        print(r'\\', end='')

\end{pycode}

\font\fb=''[cmr10]'' % Change the font of the \LaTeX command under the skills section

%----------------------------------------------------------------------------------------
%   NAME AND CONTACT INFORMATION
%----------------------------------------------------------------------------------------
\par{\centering{\Huge \py{first_names} \textsc{\py{last_name}} } \par} % Your name
\par{\centering{
        \includegraphics[valign=m, width=0.5cm]{email_icon.png} \py{email}
        \ \includegraphics[valign=m, width=0.5cm]{phone_icon.png} \py{phone}
        \includegraphics[valign=m, width=0.5cm]{facebook_icon.png} \py{facebook}

    \bigskip
} \par}
\begin{pycode}
print(r'\begin{tabular}{rp{14cm}}')
for event in events:
    output_event(event)
    print(r'\multicolumn{2}{c}{} \\')
print(r'\end{tabular}')
\end{pycode}


\end{document}
